const { contextBridge, ipcRenderer } = require("electron");

contextBridge.exposeInMainWorld("api", {
  sendMessage: (text, settings) => ipcRenderer.invoke("send-message", text, settings),
  loadPrompts: () => ipcRenderer.invoke("load-prompts"),
  savePrompts: (data) => ipcRenderer.invoke("save-prompts", data),
  loadSettings: () => ipcRenderer.invoke("load-settings"),
  saveSettings: (data) => ipcRenderer.invoke("save-settings", data),
  pingLocal: () => ipcRenderer.invoke("ping-local"),
  checkForUpdates: () => ipcRenderer.invoke("check-updates"),
  // events
  onSettingsUpdated: (cb) => ipcRenderer.on("settings-updated", (ev, s) => cb(s)),
  onOpenPromptLibrary: (cb) => ipcRenderer.on("open-prompt-library", () => cb())
});
